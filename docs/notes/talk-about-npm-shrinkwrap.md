---
title: Let's talk about shrinkwrap.json
lang: en
description: Shrinkrap.json is an unfamiliar configuration file. It is A publishable lockfile.
date: 2024-06-07 10:56:00
---

[[toc]]

**Shrinkwrap.json** is a configuration file in NPM, but it has not been used in most projects. Here we will discuss shrinkwrap.json to illustrate its meaning.

If you want to check the official documents, you can go through the [portal](https://docs.npmjs.com/cli/v6/configuring-npm/shrinkwrap-json).

## Origin

The complete form of shrinkwrap.json is `npm-shrinkwrap.json`. It was created by the `npm shrinkwrap` command

**Its function is to lock dependent versions.**

## The difference between npm-shrinkwrap.json and package-lock.json

At this point, there will be a problem where `npm-shrinkwrap.json` is used to lock dependent versions. But in daily life, we often come into contact with `package-lock.json` to lock versions. What is the difference between the two?

### Similarities

**Version locking:** Both record exact dependency version numbers, including direct and indirect (nested) dependencies. This ensures that regardless of the environment or time of installation, the same version will always be installed.

**Reproducibility building:** Due to the feature of version locking, they all contribute to achieving reproducibility building. This refers to the fact that project dependencies and the entire dependency tree can be accurately replicated and rebuilt in different development environments, continuous integration systems, and production environments.

**Security and Consistency:** Using these lock files can ensure consistency of dependencies, reduce unknown errors caused by dependency updates, and help detect dependent versions with known vulnerabilities during installation, enhancing project security.

**Submit to version control system:** Both files should usually be submitted to the version control system to ensure consistency of dependencies between team members and different deployment environments.

**Automatic update:** When using NPM to install, add, or remove dependencies, both files can be automatically updated to reflect the latest status of the dependency tree.

### Differences

#### Generation method

**package-lock.json:**

When you use NPM v5 or higher to install dependencies for NPM installation, the `package lock.json` file will be automatically generated (provided that it is not already in the project at this time).

**npm-shrinkwrap:**

This file was generated by running the npm shrinkwrap command. If the package lock.json file already exists in the project, running this command will rename it to `npm-shrinkwrap.json`.

#### Submit to version control

In general, both can be submitted to your version control system. To ensure that team members and deployment environments use the same dependency version.

**But if the project is an NPM package, there are differences.**

`package-lock.json` is not visible to published libraries (modules), while `npm-shrinkwrap.json` is visible. That is to say, the latter will affect the users who use your library. In other words, the `package-lock.json` in the npm package does not lock the ghost dependent version, but `npm-shrinkwrap.json` can do so.

#### Usage scenarios

`package-lock.json` is suitable for locking dependencies during application development to maintain consistency in the team's development environment; `npm-shrinkwrap.json` is more suitable for scenarios where users who wish to install libraries (modules) also lock dependent versions.

## Why is it rare

In fact, `npm-shrinkwrap.json` itself has existed for a long time. But we rarely see it in our daily lives. This is because in the open source ecosystem, locking in versions is an irresponsible manifestation.

Locking the version may result in delayed updates of dependencies. When new versions of dependencies appear, especially when important feature improvements or security patches are included, locked projects will not automatically adopt these updates.

When upgrading locked dependencies, more updates may be discovered, leading to a more complex and time-consuming upgrade process.

## End

**Author's suggestion:**

Please make reasonable and correct use of `npm-shrinkwrap.json` based on your current scenario, and regularly review and update the dependencies in `package-lock.json` or `npm-shrinkwrap.json` to obtain the latest security updates and feature improvements.
